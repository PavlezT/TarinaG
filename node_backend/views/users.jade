extends layout

block content
  script(rel="text/javascript", src="/javascripts/users.js")
  link(rel='stylesheet', href='/stylesheets/users.css')
  h1= title
  div(id="message_container")
    table
      tr(class="user_row")
        td
        td Name
        td Email
        td Role
      each user, index in users
        fieldset
        if index%2 == 0
          tr(class="user_row live_users light_row")
            td
              input(type="radio",name="radio-1",data=user)
            td= user.name
            td= user.email
            td= user.role
        else
          tr(data=user,class="user_row live_users")
            td
              input(type="radio",name="radio-1",data=user)
            td= user.name
            td= user.email
            td= user.role
        fieldset
    br
    button(id="create",class="ui-button ui-widget ui-corner-all main_buttom") Create
    button(id="edit",class="ui-button ui-widget ui-corner-all main_buttom") Edit
    button(id="delete",class="ui-button ui-widget ui-corner-all main_buttom") Delete
    button(id="reset",class="ui-button ui-widget ui-corner-all main_buttom") Reset Password

  div(id="create_dialog",class="my_dialog",title="Create new user")
    span= "Name"
    input(id="create_name",class="modal_input",placeholder="User Name")
    span= "Email"
    input(id="create_email",class="modal_input",placeholder="example@example.com")
    span= "Password"
    div(class="create_pass")
      input(id="create_password",type="text",class="modal_input",placeholder="Password")
      button(id="generate_pass",class="modal_button")= "Generate password"
    span= "Select role"
    select(id="select_create_role")
      option(value="0")= "none"
      each role, index in roles
        option(value=role.id)= role.name
    br  
    button(id="create_user",class="modal_button")="Create"
    button(id="cancel_create",class="modal_button")="Cancel"
    div(id="create_progressbar")
    div(id="create_okey_info",class="ui-widget")
      div(class="ui-state-highlight ui-corner-all",style="margin-top: 20px; padding: 0 .7em;")
        p= "User added!"
          span(class="ui-icon ui-icon-info",style="float: left; margin-right: .3em;")
    div(id="create_fill_fields",class="ui-widget")
      div(class="ui-state-highlight ui-corner-all",style="margin-top: 20px; padding: 0 .7em;")
        p= "Not all fields are filled out!"
          span(class="ui-icon ui-icon-info",style="float: left; margin-right: .3em;")
    div(id="create_error_info",class="ui-widget")
      div(class="ui-state-error ui-corner-all",style="padding: 0 .7em;")
        p= "Error occur. User not added"
          span(class="ui-icon ui-icon-alert",style="float: left; margin-right: .3em;")

  div(id="edit_dialog",class="my_dialog")
    span= "Name"
    input(id="edit_name",class="modal_input",placeholder="User Name")
    span= "Email"
    input(id="edit_email",class="modal_input",placeholder="example@example.com")
    span= "Change Password"
    input(id="old_password",type="password",class="modal_input",placeholder="Old Password")
    input(id="new_password",type="password",class="modal_input",placeholder="New Password")
    input(id="new_copy_password",type="password",class="modal_input",placeholder="Repeat new Password")
    span= "Select role"
    select(id="select_edit_role")
      option(value="0")= "none"
      each role, index in roles
        option(value=role.id)= role.name
    br  
    button(id="edit_user",class="modal_button")="Save"
    button(id="cancel_edit",class="modal_button")="Cancel"
    div(id="edit_progressbar")
    div(id="edit_okey_info",class="ui-widget")
      div(class="ui-state-highlight ui-corner-all",style="margin-top: 20px; padding: 0 .7em;")
        p= "User data changed!"
          span(class="ui-icon ui-icon-info",style="float: left; margin-right: .3em;")
    div(id="edit_fill_fields",class="ui-widget")
      div(class="ui-state-highlight ui-corner-all",style="margin-top: 20px; padding: 0 .7em;")
        p= "Not all fields are filled out!"
          span(class="ui-icon ui-icon-info",style="float: left; margin-right: .3em;")
    div(id="edit_error_info",class="ui-widget")
      div(class="ui-state-error ui-corner-all",style="padding: 0 .7em;")
        p= "Error occur. User data not changed"
          span(class="ui-icon ui-icon-alert",style="float: left; margin-right: .3em;")

  div(id="delete_dialog",class="my_dialog")
    span
      | Are you sure you want to permanently delete user '
      strong(id="delete_user_name")
      |'?
    br
    button(id="delete_user_button",class="modal_button")="Yes"
    button(id="cancel_delete",class="modal_button")="No"
  div(id="reset_dialog",class="my_dialog")
    span
      | Are you sure you want to send an email 'How to reset your password' to user '
      strong(id="reset_user_name")
      |'?
    br
    button(id="reset",class="modal_button")="Yes"
    button(id="cancel_reset",class="modal_button")="No"


    
    